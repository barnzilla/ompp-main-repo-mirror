

// Extra tests for ompp probing

actor_set Host asAllHostsByPhase[disease_phase] //EN All Hosts by disease phase
filter report_time >= 5;

table Host MyTest
{
    {
        duration(disease_phase, DP_INFECTIOUS) / duration() //EN Proportion infectious
    }
    * report_time
};


actor Host
{
    real hui = (disease_phase == DP_INFECTIOUS) ? 0.8f : 1.0f;


    real qaly = weighted_duration(hui);
    real v01 = weighted_cumulation(hui, hui);
    real v02 = active_spell_duration(disease_phase, DP_INFECTIOUS);
    real v03 = completed_spell_duration(disease_phase, DP_INFECTIOUS);
    real v04 = active_spell_weighted_duration(disease_phase, DP_INFECTIOUS, hui);
    real v05 = completed_spell_weighted_duration(disease_phase, DP_INFECTIOUS, hui);
    real v06 = active_spell_delta(disease_phase, DP_INFECTIOUS, age);
    real v07 = completed_spell_delta(disease_phase, DP_INFECTIOUS, age);

	logical one_time_done = { FALSE };
	event OneTimetime, OneTime;
    double thingee;
};

TIME Host::OneTimetime()
{
	if (one_time_done) return TIME_INFINITE;
	else return 0.0;
}
void Host::OneTime()
{
    thingee = RandNormal(11);
    one_time_done = TRUE;
}

table Host MyTest2
{
    {
        value_out(thingee),
        min_value_out(thingee),
        max_value_out(thingee)
    }
};


